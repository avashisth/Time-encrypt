






#include <stdio.h>
#include <stdlib.h>
#include<string.h>
#include <sys/time.h>

struct timeval t;

int main()
{	 
        FILE *fp1,*fp2;
	int i,j,ch,count=0;
        char ch2;

        fp1=fopen("Encoded.txt","r"); 
        if(fp1==NULL)
        {
          printf("Sorry! We encountered an error while opening Encoded file :(\nFile not found\n");
          exit(1);
        }
        
  
        fp2=fopen("Key.txt","r");        
        if(fp2==NULL)
        {
          printf("Sorry! We encountered an error while opening Secret file :(\nFile not found\n");
          exit(1);
        }
        

 
        for(i=0;fgetc(fp1)!=EOF;i++)
         count++;

        rewind(fp1);
        rewind(fp2);

        int rno[count],pos[count],sno[count];
	char str[count],code[count],str2[count];

char coder[20][94]={
'o','m','c','W','h','j','&','{',')',',','5','3','8','\n','7','1','=','?','2',':','<','}','9','@',';','>','6','0','4','*','-','"','#','!','+','$','%','(','.','/',' ','\'','L','U','Q','`','G','Y','p','u','P','z','\\','Z','v','H','k','g',']','x','l','F','T','s','b','n','D','S','A','r','d','M','I','w','X','R','_','e','E','f','O','y','B','q','[','i','^','K','J','N','V','a','t','C',
'j','w',')','"','.','$','(','*','-',' ','/','%','+',',','\n','#','!',';','>','{','2',':','7','1','@','6','<','3','?','4','9','8','=','0','}','5','&','\'','g','L','Y','t','_','l','[','W','H','c','v','q','A','S','u','b','X','z','J','Z','f','T','U','O','h','s','K','m','G','i','a','Q','\\','C','E','k','e','P','R','`','F','r','p','N','B','o','^','x','d','n','D','y','I',']','V','M',
'i','S','6',':','7','1','\n','4','>','<','?',';','@','3','2','5','}','=','0','9','8','z','k','E','a','y','Y','v',' ','/','(','&','#','-','$',',','.','+','\'',')','*','%','"','!','O','r','P',']','H','\\','V','D','h','g','N','q','Z','t','K','`','m','W','[','w','_','s','n','l','^','F','e','G','d','p','j','f','X','A','b','x','c','M','I','o','Q','L','J','R','u','C','T','B','{','U',
'W','d','o','a','p','u','x','Z','H','f',']','{','@',';',':','4','=','<','0','8','6','>','5','2','\n','?','7','}','9','3','1','m','g','r','z','`','K','G','D','i','A','C','t','\\','q','[','Q','R','M','F','l','c','k','S','O','B','v','Y','N','h','n','_','X','j','J','b','I','^','s','U','e','E','T','V','&',',','\'','"','*','-','%','#','.',' ','(','$',')','/','+','!','y','L','P','w',
'p','{','X','U','O','P','T','u','h','w','A','z','d','L','D','c','r','I','i','J','Q','x','g','l','v','\n','F','G','C','m','q','s','_','Y','R','\\','=','9',':','8','7','5','0','2','4',';','}','<','3','@','>','?','6','1','a','H','M','k','y','V','E','t','Z','N','!','%','#','*','&',' ','\\','/','.','$','(',')','+','"','-',',','f','b','W','^','e','B','S',']','o','`','j','n','[','K',
'^','X','\n','S','x','o','T','`','m','U','W','G','h','B','}','i','b','a','F','P','{','R','E','e','C','z','w','J','c','A','g','H','n','Z','V','d','O','N','D','q','l','Q','Y','\\','[','\'',',','+','-','(',' ','$','/','&','%','"','!',')','.','#','*','k','v','r','u','y','t','I','f',']','s','4','1',';','=','6','9','@','>','<','5','8','?','3','0','2','7',':','M','K','j','_','p','L',
'N','V','}','Z','[','y','n','c','M','l','r','L','o','f','T','Y','X','w','G','\n','q','e','j','O','I',']','u','x','E','P','{','C','g','J','/','.','-','*','+',' ','(','#','%','!',')','"','&','\\','$',',','p','Q','U','S','v','B','t','k','H','h','D','b','F','\'','K','m','R','d','A','_','^','8','?','4','7','2','6','0','5','3','9','<',';','@',':','=','1','>','`','i','s','W','z','a',
'f','y','n','s','B','[','F','u','D','`','l','K','L','g','c','p','j','d','x','N','a','H','P','{','h','m','E','\\','\n','J','U','Q','G','k','e','q','W','X','}','R','T','i','t','^','w','b','A',']','-','+','!','.','"','\'','$','*','&','%','#',',','/',')','(',' ','r','_','o','I','M','?','3','@','9','6','5','=',';','7','0','<','2','1','>','8',':','4','C','z','Y','O','V','Z','S','v',
'Y','P','d','_','H','v','n','`','t','Q','L','z','G','V','q','E','I','b','y','m','i','C','x','s','}','{','M','\\','c','Z','j','g','X','k','u','a','h','e',')','\n','.','/','%','&',' ','"','#','(','!','*',',','+','-','$','\'','N','D','U','W','[','S',']','=','9','8',':','>','0','1','2','?','7','6',';','<','4','5','3','@','r','B','o','J','A','w','K','l','f','F','p','O','R','T','^',
'B','q','K','N','c','x','\\','Y','i','k','F','V','j',']','n','g','u','l','e','z','T','X','W','a','^','{','m','E','P','o','\n','U','I','A','D','C','t','J','d','w','H','y','}','G','v','[','_','s','b','\'','#','+','*','$','"','(','%',',',' ','.','/','-','&','!',')','R','1',';','0','>','5','6','?','2',':','@','3','8','=','7','9','<','4','Q','L','`','S','M','h','p','r','f','O','Z',
'Y','B','P','p','O','R','x','k','C','`','z','t','v','D','a','\n','E','X','f','{','V','H','e','\\','S','[','l','u','b','o','q','d','I','K','w','}','L','s','n','F','m','G','j','g','U','A','Z','T','y','%','+','$','!','(','.','#','"','*',',',')','&','\'',' ','/','-','i','^',']','r','W','Q','J','9','<','6','2','?','1',';',':','3','0','8','7','>','5','4','@','=','_','c','M','N','h',
'F','w','y','r','N','C','n','f','\n','d','j','k','B','P','O','Q','m','`','W','L','U','o',' ','$','-','+','(','%',')','!','&','*',',','"','.','{','\'','#','<',':','7','1','>','2',';','5','4','@','9','6','3','?','8','0','=','/','c','e','E','A','Z','^','s','I','t','u','\\','v','b','_','H','T','D','K','X','i','z','G','l','q','Y','h','R','p','V','M','J','g','x','S','[',']','a','}',
't','E','n','h','\\','Q','b','S','T','u','I','`','v','y','_','k','/','"','+','!','\'','$','.','*','\n','&',',','#','-','%',')',' ','(','H','C','V','j','g','c','D','o','d','M','{','^','m','z','F','8','>','4','<','7','9','3',':',';','=','6','5','@','2','1','?','0','P','X','L','J','R','i','r','l','a','}','s','Y','[','f',']','p','x','N','e','Z','B','w','q','U','W','A','O','K','G',
'A','w','I','t','k','M','G','h','%','!','+','*','-',' ','.','/','#','(',',','&','\'','"',')','$','[','S','p','K','j','B','x','o','c',']','z','L','\n','V','Y','{','X','Z','^','R','e','C','U','u','l','T','v','J','_','Q','D','F','O','a','g','f','i','r','`','\\','m','@',';','8','?',':','<','3','5','6','=','1','0','4','2','7','}','>','9','E','q','W','y','s','d','N','n','P','b','H',
'G','x','t','8','2','6','>','1','@',':','?','=','4','7',';','9','<','3','\n','5','0','b','c','Y','_','P','d','L','v','r','e','`','{','f','W',']','m','i','k','F','A','T','q','X','^','j','w','K','H','\\','R','g','N','Z','I','l','z','+','*','\'',')','(','}','%','.','$','"',' ','-',',','#','/','&','!','a','S','O','D','E','B','J','U','[','s','C','o','y','n','V','h','Q','p','u','M',
'D','r','x','w','Q','M','v','a','A',']','O','j','e','d','Y',' ','#','"','$',')','!','.','+','%',',','&','/','*','(','\'','-','t','\\','W','N','{','P','K','n','U','q','L','X','o','_','F','H','[','i','s','c','B','y','\n','V','m','p','R','Z','u','E','l','^','0','9','>','@',';','4','8','?','<','6','3','}','=',':','2','7','1','5','g','b','C','T','I','G','f','h','J','z','S','`','k',
'x','k','C','`','z','t','v','D','a','E','X','f','Y','B','P','p','O','R','V','H','e','\\','S','j','g','U','A','Z','T','y','%','+','$','!','(','[','l','u','b','o','q','\n','d','I','K','w','L','s','n','F','m','G','.','#','"','*',',',')','&','\'','Q','J','9','<','6','2','?','1',' ','/','-','i','^',']','r','W',';','}',':','3','0','@','=','_','c','M','N','h','8','7','>','5','4','{',
'q','i',']','b','O','f','D','I','x','E','_','A','c','h','d','v','^','j','[','G','C','N','J','&','.','/',')','%','(','"','{','\'','-','!','#','$','*',' ','+',',','\\','X','k','y','B','R','F','U','H','w','K','Y','V','Z','e','\n','M','m','W','T','p','`','L','n','s','l','}','P','o','t','g','r','u','z','a','Q','@','4','3',';','7','>','6','?','0','<',':','9','=','1','2','5','8','S',
'C','F','c','m','H','h','\\','d','W','`','D','k','Y',']','x','v','f','o','R','l','b','.',',','(','?','7','<','>','5','@','8','2','\n','3','{','=','4','0','1',';',':','6','9','"',' ','*',')','-','#','!','\'','&','%','$','/','+','G','T','p','t','^','A','z','N','B','g','Z','O','X','V','[','j','i','S','a','E','J','s','K','y','r','U','n','}','u','e','I','q','L','_','Q','P','M','w',
'L','+','(',')','&','.',' ','$','%','-','\n','/','1','9',';','0','4','5','6',':','8','2','=','>','3','<','@','?','7','{','*','\'','!',',','"','#','k','N','Y','G','r','E','W','O','U','t','w','m','q','f','B','P','Z','T','R','l','u','i','J','`','F','\\','I','C','p','e','^','x','n','M','c','o','A','H','V','h','[','b','a','g','s','D','S','d','}','Q','j','z','_',']','K','X','v','y'
};
   

        
printf("\n\n\t\t --DECODER--");
		printf("\n\nRetrieved Secret key is: ");
	for(i=0;ch=fscanf(fp2,"%d",&sno[i])!=EOF;i++)      
         printf("%d",sno[i]);
	
	printf("\n\nRetrieved Encoded message is: ");
	for(i=0;(ch2=fgetc(fp1))!=EOF;i++)
        {
         str2[i]=ch2;
         printf("%c",ch2);
        }

	for(i=0;i<count;i++)
	{
		 switch(str2[i])
		      {
		       case 'a': pos[i]=0;  break;
		       case 'b': pos[i]=1;  break;
		       case 'c': pos[i]=2;  break;
		       case 'd': pos[i]=3;  break;
		       case 'e': pos[i]=4;  break;
		       case 'f': pos[i]=5;  break;
		       case 'g': pos[i]=6;  break;
		       case 'h': pos[i]=7;  break;
		       case 'i': pos[i]=8;  break;
		       case 'j': pos[i]=9;  break;
		       case 'k': pos[i]=10; break;
		       case 'l': pos[i]=11; break;
		       case 'm': pos[i]=12; break;
		       case 'n': pos[i]=13; break;
		       case 'o': pos[i]=14; break;
		       case 'p': pos[i]=15; break;
		       case 'q': pos[i]=16; break;
		       case 'r': pos[i]=17; break;
		       case 's': pos[i]=18; break;
		       case 't': pos[i]=19; break;
		       case 'u': pos[i]=20; break;
		       case 'v': pos[i]=21; break;
		       case 'w': pos[i]=22; break;
		       case 'x': pos[i]=23; break;
		       case 'y': pos[i]=24; break;
		       case 'z': pos[i]=25; break;
                case 'A': pos[i]=26;  break;
		       case 'B': pos[i]=27;  break;
		       case 'C': pos[i]=28;  break;
		       case 'D': pos[i]=29;  break;
		       case 'E': pos[i]=30;  break;
		       case 'F': pos[i]=31;  break;
		       case 'G': pos[i]=32;  break;
		       case 'H': pos[i]=33;  break;
		       case 'I': pos[i]=34;  break;
		       case 'J': pos[i]=35;  break;
		       case 'K': pos[i]=36; break;
		       case 'L': pos[i]=37; break;
		       case 'M': pos[i]=38; break;
		       case 'N': pos[i]=39; break;
		       case 'O': pos[i]=40; break;
		       case 'P': pos[i]=41; break;
		       case 'Q': pos[i]=42; break;
		       case 'R': pos[i]=43; break;
		       case 'S': pos[i]=44; break;
		       case 'T': pos[i]=45; break;
		       case 'U': pos[i]=46; break;
		       case 'V': pos[i]=47; break;
		       case 'W': pos[i]=48; break;
		       case 'X': pos[i]=49; break;
		       case 'Y': pos[i]=50; break;
		       case 'Z': pos[i]=51; break; 
		        case '0': pos[i]=52;  break;
		       case '1': pos[i]=53;  break;
		       case '2': pos[i]=54;  break;
		       case '3': pos[i]=55;  break;
		       case '4': pos[i]=56;  break;
		       case '5': pos[i]=57;  break;
		       case '6': pos[i]=58;  break;
		       case '7': pos[i]=59;  break;
		       case '8': pos[i]=60;  break;
		       case '9': pos[i]=61;  break;
		       case ' ': pos[i]=62; break;
		       case '!': pos[i]=63; break;
		       case '"': pos[i]=64; break;
		       case '#': pos[i]=65; break;
		       case '$': pos[i]=66; break;
		       case '%': pos[i]=67; break;
		       case '\'': pos[i]=68; break;
		       case '(': pos[i]=69; break;
		       case ')': pos[i]=70; break;
		       case '*': pos[i]=71; break;
		       case '+': pos[i]=72; break;
		       case ',': pos[i]=73; break;
		       case '-': pos[i]=74; break;
		       case '.': pos[i]=75; break;
		       case '/': pos[i]=76; break;
		       case ':': pos[i]=77; break;
		       case ';': pos[i]=78; break;
		       case '<': pos[i]=79; break;
		       case '=': pos[i]=80; break;
		       case '>': pos[i]=81; break;
		       case '@': pos[i]=82; break;
		       case '[': pos[i]=83; break;
		       case '\\': pos[i]=84; break;
		       case ']': pos[i]=85; break;
		       case '^': pos[i]=86; break;
		       case '`': pos[i]=87; break;
		       case '&': pos[i]=88; break;
		       case '_': pos[i]=89;break;
				case '?': pos[i]=90;break;	
				 case '{': pos[i]=91; break;
		       case '}': pos[i]=92;break;
				case '\n': pos[i]=93;break;	    
			  }
	}
	printf("\n\nDecoded message is: \n");
        printf("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n");
        for(i=0;i<count;i++)
	{
              printf("%c",coder[sno[i]][pos[i]]);

	}
        printf("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n");
}
